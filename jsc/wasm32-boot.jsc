var section = new Wasm32ModuleSection(os.file.readFile(path, "binary"));
var module = new Wasm32Module();
module.add_section(section);
var system = new Wasm32System();

system.instantiate(module, ["this program"], ["A=B"]).then(() => {
    try {
        system.threads[0].exports._start(0, 65535 * 1024, 0, 0, 0, 0);
    } catch (e) {
        console.log(e);
        console.log(e.stack);
    }
}).catch((e) => console.log(e));
